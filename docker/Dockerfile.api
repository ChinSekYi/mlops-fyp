FROM python:3.11-slim

WORKDIR /app

COPY api/requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
RUN pip install --no-cache-dir boto3 mlflow

COPY api/ ./api/
COPY config.yaml .

EXPOSE 8000

CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000", "--reload"]


# docker build --no-cache --platform linux/amd64 -t sychin0606/fraud-api:latest -f docker/Dockerfile.api .
# docker push sychin0606/fraud-api:latest